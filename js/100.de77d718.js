"use strict";(globalThis["webpackChunkweb_admin"]=globalThis["webpackChunkweb_admin"]||[]).push([[100],{4100:(e,a,t)=>{t.r(a),t.d(a,{default:()=>U});var l=t(9835),s=t(1957),i=t(6970);const o=e=>((0,l.dD)("data-v-736e2ed1"),e=e(),(0,l.Cn)(),e),r={class:"col col-lg-12 col-md-6 col-sm-8 col-xs-10 q-pt-md"},n={class:"row q-mt-lg"},d={class:"row col-12 q-mt-md"},u=o((()=>(0,l._)("div",{class:"col-md-4 col-lg-4 col-xs-12"},[(0,l._)("div",{class:"q-table__title"},"Master Data Sertifikasi"),(0,l._)("p",{class:"text-caption"},"Data Sertifikasi")],-1))),m=o((()=>(0,l._)("span",{class:"rowNumber"},null,-1))),p={key:0,class:"text-orange"},f={key:1,class:"text-green"},c={key:2,class:"text-red"},g={key:0,class:"text-red"},w={key:1};function b(e,a,t,o,b,k){const h=(0,l.up)("q-breadcrumbs-el"),_=(0,l.up)("q-breadcrumbs"),q=(0,l.up)("q-card"),N=(0,l.up)("q-space"),W=(0,l.up)("q-btn"),y=(0,l.up)("q-input"),v=(0,l.up)("q-slide-transition"),P=(0,l.up)("q-td"),S=(0,l.up)("q-img"),$=(0,l.up)("q-avatar"),D=(0,l.up)("q-item-section"),Z=(0,l.up)("q-item"),Q=(0,l.up)("q-tr"),x=(0,l.up)("q-table"),z=(0,l.up)("q-card-section"),C=(0,l.up)("q-page"),T=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.j4)(C,{class:"q-pr-md q-pl-md q-pa-md"},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l.Wm)(q,{class:"my-card q-pa-md",flat:"",bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{separator:"---",class:"text-blue-10","active-color":"secondary"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{label:"Main Menu",icon:"widgets"}),(0,l.Wm)(h,{label:"Sertifikasi",icon:"extension"})])),_:1})])),_:1}),(0,l._)("div",n,[(0,l._)("div",d,[(0,l.Wm)(q,{class:"my-card col",flat:"",bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{horizontal:""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"col-12 q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{"table-style":"counter-reset: cssRowCounter "+(b.pagination.page-1)*b.pagination.rowsPerPage+";",title:"Master Data Surat","aria-label":"Text",class:"text-h5",rows:b.rows,flat:"",columns:b.columns,"row-key":"name",filter:b.filter,pagination:b.pagination},{top:(0,l.w5)((()=>[u,(0,l.Wm)(N),(0,l.Wm)(W,{flat:"",round:"",color:"primary",icon:"search",onClick:a[0]||(a[0]=e=>b.visibles=!b.visibles),size:"md",class:"q-mr-sm"}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(y,{outlined:"",debounce:"300",placeholder:"Placeholder",style:{width:"300px"},color:"primary",modelValue:b.filter,"onUpdate:modelValue":a[1]||(a[1]=e=>b.filter=e),dense:""},null,8,["modelValue"])],512),[[s.F8,b.visibles]])])),_:1})])),body:(0,l.w5)((a=>[(0,l.Wm)(Q,{props:a},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{class:"text-center"},{default:(0,l.w5)((()=>[m])),_:1}),(0,l.Wm)(P,{key:"userName",props:a},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.row.userName),1)])),_:2},1032,["props"]),(0,l.Wm)(P,{key:"Sertifikat",props:a},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.row.Sertifikat),1)])),_:2},1032,["props"]),(0,l.Wm)(P,{key:"Nama",props:a},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.row.Nama),1)])),_:2},1032,["props"]),(0,l.Wm)(P,{key:"Email",props:a},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.row.Email),1)])),_:2},1032,["props"]),(0,l.Wm)(P,{key:"No_Handphone",props:a},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.row.No_Handphone),1)])),_:2},1032,["props"]),(0,l.Wm)(P,{key:"No_NPWP",props:a},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.row.No_NPWP),1)])),_:2},1032,["props"]),(0,l.Wm)(P,{key:"foto_produk",props:a},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(Z,{clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)($,{rounded:"",size:"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{src:`${e.$imgUrl}/gambar-sertifikat/${a.row.foto_produk}`},null,8,["src"])])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[T]])])),_:2},1032,["props"]),(0,l.Wm)(P,{key:"foto_ktp",props:a},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(Z,{clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)($,{rounded:"",size:"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{src:`${e.$imgUrl}/gambar-sertifikat/${a.row.foto_ktp}`},null,8,["src"])])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[T]])])),_:2},1032,["props"]),(0,l.Wm)(P,{key:"status",props:a},{default:(0,l.w5)((()=>["Dalam Proses"==a.row.status?((0,l.wg)(),(0,l.iD)("div",p,(0,i.zw)(a.row.status),1)):(0,l.kq)("",!0),"Diterima"==a.row.status?((0,l.wg)(),(0,l.iD)("div",f,(0,i.zw)(a.row.status),1)):(0,l.kq)("",!0),"Ditolak"==a.row.status?((0,l.wg)(),(0,l.iD)("div",c,(0,i.zw)(a.row.status),1)):(0,l.kq)("",!0)])),_:2},1032,["props"]),(0,l.Wm)(P,{key:"tgl",props:a},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.row.tgl),1)])),_:2},1032,["props"]),(0,l.Wm)(P,{key:"file",props:a},{default:(0,l.w5)((()=>[0==a.row.file.length?((0,l.wg)(),(0,l.iD)("div",g," File Kosong ")):((0,l.wg)(),(0,l.iD)("div",w,[(0,l.Wm)(W,{label:"File",color:"green",size:"sm",class:"q-ml-sm","no-caps":"",outline:"",onClick:e=>k.downloadPDF(a.row._id)},null,8,["onClick"])]))])),_:2},1032,["props"]),(0,l.Wm)(P,{key:"aksi",props:a},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{label:"Aksi",color:"green",size:"sm",to:{name:"edit_sertifikasi",params:{id:a.row._id}},class:"q-ml-sm","no-caps":""},null,8,["to"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["table-style","rows","columns","filter","pagination"])])),_:1})])),_:1})])),_:1})])])])])),_:1})}var k=t(499);const h={name:"PageIndex",data(){return{file:null,nama:null,url:null,visibles:!1,card:(0,k.iH)(!1),pagination:{rowsPerPage:10},options:[],namaCustomer:[],fotoDiri:null,foto_produk:null,foto_ktp:null,visibles:!1,filter:null,totalHutang:0,totalLunas:0,columns:[{name:"no",label:"No",field:"no"},{name:"userName",required:!0,label:"userName",align:"left",field:"userName",sortable:!0},{name:"Sertifikat",required:!0,label:"Sertifikat",align:"left",field:"Sertifikat",sortable:!0},{name:"Nama",required:!0,label:"Nama",align:"left",field:"Nama",sortable:!0},{name:"Email",required:!0,label:"Email",align:"left",field:"Email",sortable:!0},{name:"No_Handphone",required:!0,label:"No Handphone",align:"left",field:"No_Handphone",sortable:!0},{name:"No_NPWP",required:!0,label:"No_NPWP",align:"left",field:"No_NPWP",sortable:!0},{name:"foto_ktp",required:!0,label:"foto ktp",align:"left",field:"foto_ktp",sortable:!0},{name:"foto_produk",required:!0,label:"foto produk",align:"left",field:"foto_produk",sortable:!0},{name:"status",required:!0,label:"status",align:"left",field:"status",sortable:!0},{name:"tgl",required:!0,label:"Tanggal",align:"left",field:"tgl",sortable:!0},{name:"file",required:!0,label:"File Surat",align:"left",field:"file",sortable:!0},{name:"aksi",label:"Aksi",field:"aksi",align:"center"}],rows:[],detail:{visible:!1,pelanggan:null,grandTotal:null,columns:[{name:"no",label:"No",field:"no"},{name:"userName",required:!0,label:"userName",align:"left",field:"userName",sortable:!0},{name:"Sertifikat",required:!0,label:"Sertifikat",align:"left",field:"Sertifikat",sortable:!0},{name:"Nama",required:!0,label:"Nama",align:"left",field:"Nama",sortable:!0},{name:"Email",required:!0,label:"Email",align:"left",field:"Email",sortable:!0},{name:"No_Handphone",required:!0,label:"No Handphone",align:"left",field:"No_Handphone",sortable:!0},{name:"No_NPWP",required:!0,label:"No_NPWP",align:"left",field:"No_NPWP",sortable:!0},{name:"foto_ktp",required:!0,label:"foto ktp",align:"left",field:"foto_ktp",sortable:!0},{name:"foto_produk",required:!0,label:"foto produk",align:"left",field:"foto_produk",sortable:!0},{name:"status",required:!0,label:"status",align:"left",field:"status",sortable:!0},{name:"tgl",required:!0,label:"Tanggal",align:"left",field:"tgl",sortable:!0},{name:"file",required:!0,label:"File Surat",align:"left",field:"file",sortable:!0},{name:"aksi",label:"Aksi",field:"aksi",align:"center"}],rows:[]}}},created(){this.getCustomer()},methods:{downloadPDF(e){try{this.$api.get("sertifikasi/get-id/"+e).then((e=>{if(!0!==e.data.status)this.$showNotif(e.data.message,"negative");else{const a=e.data.data;this.file=a.file,this.url="http://localhost:4000/gambar-sertifikat/"+this.file,console.log("INI FILE SETAN"),console.log(this.url);this.downloadFile(this.url,a.jenis_surat)}}))}catch(a){console.log(a.message),this.$showNotif("Terjadi ke !","negative")}},downloadFile(e,a){const t=document.createElement("a");t.href=e,t.setAttribute("download",a),document.body.appendChild(t),t.click(),document.body.removeChild(t)},getCustomer(){try{this.$api.get("sertifikasi/get-all").then((e=>{if(!0!==e.data.status)this.$showNotif(e.data.message,"negative");else{const a=e.data.data;this.rows=a,a.reverse(),console.log(this.rows)}}))}catch(e){this.$showNotif("Terjadi kesalahan !","negative")}},tampil(e){this.$refs.dialog.show(this.fotoDiri=e)},accept(e){this.$q.dialog({title:"Peringatan",message:"Apakah Anda Setuju untuk menerima transaksi?",color:"green",cancel:!0,persistent:!0}).onOk((()=>{try{this.$api.put("/transaksi/updateWeb/"+e,{status:"Selesai"}).then((e=>{!0!==e.data.status?this.$q.notify({message:"Status Gagal",color:"red"}):(this.$q.notify({message:"Status Berhasil ",color:"green"}),this.getCustomer())}))}catch(a){console.log(a),this.$showNotif("Terjadi kesalahan !","negative")}}))},reject(e){this.$q.dialog({title:"Peringatan",message:"Apakah Anda Setuju untuk menolak transaksi?",color:"red",cancel:!0,persistent:!0}).onOk((()=>{try{this.$api.put("/transaksi/updateWeb/"+e,{status:"Ditolak"}).then((e=>{!0!==e.data.status?this.$q.notify({message:"Status Gagal",color:"red"}):(this.$q.notify({message:"Status Berhasil ",color:"green"}),this.getCustomer())}))}catch(a){console.log(a),this.$showNotif("Terjadi kesalahan !","negative")}}))},showDetail(e){const a=e.map((e=>({barang:e.barang,subTotal:e.subtotal})));this.detail.visible=!0,this.detail.rows=a,console.log(a)}}};var _=t(1639),q=t(9885),N=t(4458),W=t(2605),y=t(8052),v=t(3190),P=t(7580),S=t(136),$=t(8879),D=t(9003),Z=t(3119),Q=t(1233),x=t(7220),z=t(490),C=t(6749),T=t(1357),E=t(335),j=t(1136),A=t(9984),F=t.n(A);const H=(0,_.Z)(h,[["render",b],["__scopeId","data-v-736e2ed1"]]),U=H;F()(h,"components",{QPage:q.Z,QCard:N.Z,QBreadcrumbs:W.Z,QBreadcrumbsEl:y.Z,QCardSection:v.Z,QTable:P.Z,QSpace:S.Z,QBtn:$.Z,QSlideTransition:D.Z,QInput:Z.Z,QTr:Q.Z,QTd:x.Z,QItem:z.Z,QItemSection:C.Z,QAvatar:T.Z,QImg:E.Z}),F()(h,"directives",{Ripple:j.Z})}}]);